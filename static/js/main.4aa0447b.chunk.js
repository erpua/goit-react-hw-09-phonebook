(this["webpackJsonpgoit-react-hw-09-phonebook"]=this["webpackJsonpgoit-react-hw-09-phonebook"]||[]).push([[2],{101:function(t,e,n){t.exports={header:"AppBar_header__4Wgx7"}},136:function(t,e,n){t.exports={container:"UserMenu_container__G5jS4",avatar:"UserMenu_avatar__2qubl",name:"UserMenu_name__3ZYCM",btn:"UserMenu_btn__3jBmI"}},137:function(t,e,n){"use strict";n.r(e);var c,a,r,o,s,u,i=n(0),b=n.n(i),l=n(11),j=n.n(l),d=n(33),O=n(19),g=n(91),f=n(65),p=n(5),h=n(92),C=n.n(h),m=n(31),v=n(93),x=n.n(v),k=n(4),S=n(20),E=n(18),I=Object(p.c)([],(c={},Object(k.a)(c,E.a.fetchContactsSuccess,(function(t,e){return e.payload})),Object(k.a)(c,E.a.addContactSuccess,(function(t,e){var n=e.payload;return[].concat(Object(f.a)(t),[n])})),Object(k.a)(c,E.a.updateContactSuccess,(function(t,e){var n=e.payload;return t.map((function(t){return t.id===n.id?n:t}))})),Object(k.a)(c,E.a.deleteContactSuccess,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),c)),R=Object(p.c)("",Object(k.a)({},E.a.filterContacts,(function(t,e){return e.payload}))),y=Object(p.c)(!1,(a={},Object(k.a)(a,E.a.fetchContactsRequest,(function(){return!0})),Object(k.a)(a,E.a.fetchContactsSuccess,(function(){return!1})),Object(k.a)(a,E.a.fetchContactsError,(function(){return!1})),Object(k.a)(a,E.a.addContactRequest,(function(){return!0})),Object(k.a)(a,E.a.addContactSuccess,(function(){return!1})),Object(k.a)(a,E.a.addContactError,(function(){return!1})),Object(k.a)(a,E.a.deleteContactRequest,(function(){return!0})),Object(k.a)(a,E.a.deleteContactSuccess,(function(){return!1})),Object(k.a)(a,E.a.deleteContactError,(function(){return!1})),Object(k.a)(a,E.a.updateContactRequest,(function(){return!0})),Object(k.a)(a,E.a.updateContactSuccess,(function(){return!1})),Object(k.a)(a,E.a.updateContactError,(function(){return!1})),a)),_=Object(S.b)({items:I,filter:R,loading:y}),q=n(7),w={name:null,email:null},U=Object(p.c)(w,(r={},Object(k.a)(r,q.a.registerSuccess,(function(t,e){return e.payload.user})),Object(k.a)(r,q.a.logInSuccess,(function(t,e){return e.payload.user})),Object(k.a)(r,q.a.logOutSuccess,(function(){return w})),Object(k.a)(r,q.a.getCurrentUserSuccess,(function(t,e){return e.payload})),r)),L=Object(p.c)(null,(o={},Object(k.a)(o,q.a.registerSuccess,(function(t,e){return e.payload.token})),Object(k.a)(o,q.a.logInSuccess,(function(t,e){return e.payload.token})),Object(k.a)(o,q.a.logOutSuccess,(function(){return null})),o)),N=Object(p.c)(null,(s={},Object(k.a)(s,q.a.registerError,(function(t,e){return e.payload})),Object(k.a)(s,q.a.logInError,(function(t,e){return e.payload})),Object(k.a)(s,q.a.logOutSuccess,(function(t,e){return e.payload})),Object(k.a)(s,q.a.getCurrentUserError,(function(t,e){return e.payload})),s)),T=Object(p.c)(!1,(u={},Object(k.a)(u,q.a.registerSuccess,(function(){return!0})),Object(k.a)(u,q.a.logInSuccess,(function(){return!0})),Object(k.a)(u,q.a.getCurrentUserRequest,(function(){return!0})),Object(k.a)(u,q.a.getCurrentUserSuccess,(function(){return!0})),Object(k.a)(u,q.a.registerError,(function(){return!1})),Object(k.a)(u,q.a.logInError,(function(){return!1})),Object(k.a)(u,q.a.logOutSuccess,(function(){return!1})),Object(k.a)(u,q.a.getCurrentUserError,(function(){return!1})),u)),A=Object(S.b)({user:U,isAuthenticated:T,token:L,error:N}),M=[].concat(Object(f.a)(Object(p.d)({serializableCheck:{ignoredActions:[m.a,m.f,m.b,m.c,m.d,m.e]}})),[C.a]),F={key:"authToken",storage:x.a,whitelist:["token"]},z=Object(p.a)({reducer:{auth:Object(m.g)(F,A),contacts:_},middleware:M,devTools:!1}),B={store:z,persistor:Object(m.h)(z)},P=n(9),D=n(26),H=n(56),J=n.n(H),V=n(2),G=function(){return Object(V.jsxs)("div",{children:[Object(V.jsx)(d.b,{to:"/register",exact:!0,className:J.a.link,activeClassName:J.a.activeLink,children:"Sign Up"}),Object(V.jsx)(d.b,{to:"/login",exact:!0,className:J.a.link,activeClassName:J.a.activeLink,children:"Log In"})]})},W=n(57),Y=n(171),Z=n(17),K=n(179),Q=n(98),X=n.n(Q),$=Object(Y.a)((function(t){return{search:Object(k.a)({position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:Object(Z.c)(t.palette.common.white,.15),"&:hover":{backgroundColor:Object(Z.c)(t.palette.common.white,.25)},marginRight:t.spacing(3),marginLeft:0,width:"100%",height:"90%"},t.breakpoints.up("sm"),{marginLeft:t.spacing(3),width:"auto"}),searchIcon:{padding:t.spacing(0,1),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(k.a)({padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),"px)"),transition:t.transitions.create("width"),width:"100%"},t.breakpoints.up("md"),{width:"20ch"})}}));function tt(){var t=$(),e=Object(O.c)(),n=Object(O.d)(W.a.getFilter),c=Object(i.useCallback)((function(t){return e(E.a.filterContacts(t.target.value))}),[e]);return Object(V.jsxs)("div",{className:t.search,children:[Object(V.jsx)("div",{className:t.searchIcon,children:Object(V.jsx)(X.a,{})}),Object(V.jsx)(K.a,{placeholder:"Search contact\u2026",classes:{root:t.inputRoot,input:t.inputInput},inputProps:{"aria-label":"search"},value:n,onChange:c})]})}var et=n(48),nt=n.n(et);function ct(){var t=Object(P.g)(),e=Object(O.d)(D.a.getIsLoggedIn);return Object(V.jsxs)("nav",{className:nt.a.navigation,children:[Object(V.jsx)(d.b,{to:"/",exact:!0,className:nt.a.link,activeClassName:nt.a.activeLink,children:"HOME"}),e&&Object(V.jsx)(V.Fragment,{children:Object(V.jsx)(d.b,{to:"/contacts",exact:!0,className:nt.a.link,activeClassName:nt.a.activeLink,children:"Contacts"})}),"/contacts"===t.pathname&&Object(V.jsx)(tt,{})]})}var at=n(77),rt=n(59),ot=n(145),st=n(177),ut=n(180),it=n(181),bt=n(100),lt=n.n(bt),jt=n(175),dt=n(12),Ot=n(99),gt=n.n(Ot),ft=Object(dt.a)((function(t){return{badge:{right:-3,top:13,border:"2px solid ".concat(t.palette.background.paper),padding:"0 4px"}}}))(jt.a),pt=function(t){var e=t.totalContacts;return Object(V.jsx)(ft,{badgeContent:e,color:"secondary",children:Object(V.jsx)(gt.a,{})})};n(136);function ht(){var t=Object(O.c)(),e=Object(P.g)(),n=Object(O.d)(D.a.getUserEmail),c=Object(O.d)(W.a.getFilteredTotalContacts),a=b.a.useState(null),r=Object(at.a)(a,2),o=r[0],s=r[1],u=Boolean(o),l=function(){s(null)},j=Object(i.useCallback)((function(){t(rt.a.logOut())}),[t]);return Object(V.jsxs)("div",{className:"menu",children:["/contacts"===e.pathname&&Object(V.jsx)("div",{className:"badge",children:Object(V.jsx)(pt,{className:"badge",totalContacts:c})}),Object(V.jsx)(ut.a,{"aria-controls":"fade-menu","aria-haspopup":"true",onClick:function(t){s(t.currentTarget)},icon:Object(V.jsx)(lt.a,{}),label:n,clickable:!0,color:"primary"}),Object(V.jsxs)(ot.a,{id:"fade-menu",anchorEl:o,keepMounted:!0,open:u,onClose:l,TransitionComponent:st.a,children:[Object(V.jsx)(it.a,{onClick:l,children:"My account"}),Object(V.jsx)(it.a,{onClick:j,children:"Logout"})]})]})}var Ct=n(101),mt=n.n(Ct),vt=Object(O.b)((function(t){return{isAuthenticated:D.a.getIsLoggedIn(t)}}),null)((function(t){var e=t.isAuthenticated;return Object(V.jsxs)("header",{className:mt.a.header,children:[Object(V.jsx)(ct,{}),e?Object(V.jsx)(ht,{}):Object(V.jsx)(G,{})]})})),xt=n(34),kt=n(66);function St(t){var e=t.component,n=t.redirectTo,c=Object(kt.a)(t,["component","redirectTo"]),a=Object(O.d)(D.a.getIsLoggedIn);return Object(V.jsx)(P.b,Object(xt.a)(Object(xt.a)({},c),{},{render:function(t){return a?Object(V.jsx)(e,Object(xt.a)({},t)):Object(V.jsx)(P.a,{to:n})}}))}function Et(t){var e=t.component,n=t.redirectTo,c=Object(kt.a)(t,["component","redirectTo"]),a=Object(O.d)(D.a.getIsLoggedIn);return Object(V.jsx)(P.b,Object(xt.a)(Object(xt.a)({},c),{},{render:function(t){return a&&c.restricted?Object(V.jsx)(P.a,{to:n}):Object(V.jsx)(e,Object(xt.a)({},t))}}))}var It=Object(i.lazy)((function(){return n.e(7).then(n.bind(null,211))})),Rt=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(6)]).then(n.bind(null,221))})),yt=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(8)]).then(n.bind(null,218))})),_t=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,220))}));function qt(){var t=Object(O.c)(),e=Object(i.useCallback)((function(){t(rt.a.getCurrentUser())}),[t]);return Object(i.useEffect)((function(){e()}),[e]),Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(vt,{}),Object(V.jsx)(i.Suspense,{fallback:Object(V.jsx)("p",{children:" Downloading ..."}),children:Object(V.jsxs)(P.d,{children:[Object(V.jsx)(Et,{exact:!0,path:"/",component:It}),Object(V.jsx)(Et,{path:"/register",restricted:!0,redirectTo:"/contacts",component:yt}),Object(V.jsx)(Et,{path:"/login",restricted:!0,redirectTo:"/contacts",component:Rt}),Object(V.jsx)(St,{path:"/contacts",redirectTo:"/login",component:_t})]})})]})}j.a.render(Object(V.jsx)(b.a.StrictMode,{children:Object(V.jsx)(O.a,{store:B.store,children:Object(V.jsx)(g.a,{loading:null,persistor:B.persistor,children:Object(V.jsx)(d.a,{children:Object(V.jsx)(qt,{})})})})}),document.getElementById("root"))},18:function(t,e,n){"use strict";var c=n(5),a={fetchContactsRequest:Object(c.b)("contacts/fetchContactsRequest"),fetchContactsSuccess:Object(c.b)("contacts/fetchContactsSuccess"),fetchContactsError:Object(c.b)("contacts/fetchContactsError"),addContactRequest:Object(c.b)("contacts/addContactRequest"),addContactSuccess:Object(c.b)("contacts/addContactSuccess"),addContactError:Object(c.b)("contacts/addContactError"),updateContactRequest:Object(c.b)("contacts/updateContactRequest"),updateContactSuccess:Object(c.b)("contacts/updateContactSuccess"),updateContactError:Object(c.b)("contacts/updateContactError"),deleteContactRequest:Object(c.b)("contacts/deleteContactRequest"),deleteContactSuccess:Object(c.b)("contacts/deleteContactSuccess"),deleteContactError:Object(c.b)("contacts/deleteContactError"),filterContacts:Object(c.b)("contacts/changeFilter")};e.a=a},26:function(t,e,n){"use strict";var c={getIsLoggedIn:function(t){return t.auth.isAuthenticated},getUserName:function(t){return t.auth.user.name},getUserEmail:function(t){return t.auth.user.email}};e.a=c},48:function(t,e,n){t.exports={link:"Navigation_link__1NuDV",activeLink:"Navigation_activeLink__39saH"}},56:function(t,e,n){t.exports={link:"AuthNav_link__2NuVs",activeLink:"AuthNav_activeLink__2wo_e"}},57:function(t,e,n){"use strict";var c=n(50),a=function(t){return t.contacts.items},r=function(t){return t.contacts.filter},o=Object(c.a)([a,r],(function(t,e){var n=e.toLowerCase();return t.filter((function(t){return t.name.toLowerCase().includes(n)}))})),s={getContacts:a,getFilter:r,getLoading:function(t){return t.contacts.loading},getFilteredContacts:o,getTotalContacts:function(t){return a(t).length},getFilteredTotalContacts:function(t){return o(t).length}};e.a=s},59:function(t,e,n){"use strict";var c=n(30),a=n.n(c),r=n(55),o=n(35),s=n.n(o),u=n(7);s.a.defaults.baseURL="https://connections-api.herokuapp.com";var i=function(t){s.a.defaults.headers.common.Authorization="Bearer ".concat(t)},b=function(){s.a.defaults.headers.common.Authorization=""},l={register:function(t){return function(){var e=Object(r.a)(a.a.mark((function e(n){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(u.a.registerRequest()),e.prev=1,e.next=4,s.a.post("/users/signup",t);case 4:c=e.sent,i(c.data.token),n(u.a.registerSuccess(c.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(u.a.registerError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(r.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(u.a.logOutRequest()),t.prev=1,t.next=4,s.a.post("/users/logout");case 4:b(),e(u.a.logOutSuccess()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(u.a.logOutError(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(r.a)(a.a.mark((function e(n){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(u.a.logInRequest()),e.prev=1,e.next=4,s.a.post("/users/login",t);case 4:c=e.sent,i(c.data.token),n(u.a.logInSuccess(c.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(u.a.logInError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(r.a)(a.a.mark((function t(e,n){var c,r,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n(),r=c.auth.token){t.next=3;break}return t.abrupt("return");case 3:return i(r),e(u.a.getCurrentUserRequest()),t.prev=5,t.next=8,s.a.get("/users/current");case 8:o=t.sent,e(u.a.getCurrentUserSuccess(o.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(u.a.getCurrentUserError(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,n){return t.apply(this,arguments)}}()}};e.a=l},7:function(t,e,n){"use strict";var c=n(5),a={registerRequest:Object(c.b)("auth/registerRequest"),registerSuccess:Object(c.b)("auth/registerSuccess"),registerError:Object(c.b)("auth/registerError"),logInRequest:Object(c.b)("auth/logInRequest"),logInSuccess:Object(c.b)("auth/logInSuccess"),logInError:Object(c.b)("auth/logInError"),logOutRequest:Object(c.b)("auth/logOutRequest"),logOutSuccess:Object(c.b)("auth/logOutSuccess"),logOutError:Object(c.b)("auth/logOutError"),getCurrentUserRequest:Object(c.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(c.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(c.b)("auth/getCurrentUserError")};e.a=a}},[[137,3,4]]]);
//# sourceMappingURL=main.4aa0447b.chunk.js.map